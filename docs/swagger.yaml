basePath: /
definitions:
  handler.HealthResponse:
    properties:
      status:
        type: string
      time:
        type: string
    type: object
  handler.RawPayload:
    additionalProperties: {}
    type: object
  model.FocusCnpjEndereco:
    properties:
      bairro:
        type: string
      cep:
        type: string
      codigo_ibge:
        type: string
      codigo_municipio:
        type: string
      codigo_siafi:
        type: string
      complemento:
        type: string
      logradouro:
        type: string
      nome_municipio:
        type: string
      numero:
        type: string
      uf:
        type: string
    type: object
  model.FocusCnpjResponse:
    properties:
      cnae_principal:
        type: string
      cnpj:
        type: string
      endereco:
        $ref: '#/definitions/model.FocusCnpjEndereco'
      optante_mei:
        type: boolean
      optante_simples_nacional:
        type: boolean
      razao_social:
        type: string
      situacao_cadastral:
        type: string
    type: object
  model.FocusEmpresaCreateRequest:
    properties:
      arquivo_certificado_base64:
        example: MIIj4gIBAzCCI54GCSqGSIb3DQEHAaCC...ASD==
        type: string
      bairro:
        example: Vila Isabel
        type: string
      cep:
        example: 80210000
        type: integer
      cnpj:
        example: "10964044000164"
        type: string
      complemento:
        example: Loja 1
        type: string
      cpf_responsavel:
        example: "12345678901"
        type: string
      email:
        example: test@example.com
        type: string
      inscricao_municipal:
        description: Must be string to preserve leading zeros (JSON number cannot
          represent "00", "00123", etc.)
        example: "0046532"
        type: string
      logradouro:
        example: Rua João da Silva
        type: string
      municipio:
        example: Curitiba
        type: string
      nome:
        example: Nome da empresa Ltda
        type: string
      nome_fantasia:
        example: Nome Fantasia
        type: string
      nome_responsavel:
        example: Fulano de Tal
        type: string
      numero:
        example: 153
        type: integer
      regime_tributario:
        example: 1
        type: integer
      senha_certificado:
        example: "123456"
        type: string
      telefone:
        example: "4130333333"
        type: string
      uf:
        example: PR
        type: string
    required:
    - arquivo_certificado_base64
    - bairro
    - cep
    - cnpj
    - complemento
    - email
    - inscricao_municipal
    - logradouro
    - municipio
    - nome
    - nome_fantasia
    - numero
    - regime_tributario
    - senha_certificado
    - uf
    type: object
  model.FocusEmpresaResponse:
    properties:
      bairro:
        example: PARQUE DOM PEDRO II
        type: string
      cep:
        example: "13056430"
        type: string
      certificado_cnpj:
        example: "61453926000127"
        type: string
      certificado_especifico:
        example: false
        type: boolean
      certificado_valido_ate:
        description: Certificado
        example: "2026-11-12T14:33:00-03:00"
        type: string
      certificado_valido_de:
        example: "2025-11-12T14:33:00-03:00"
        type: string
      client_app_id:
        example: 357307
        type: integer
      cnpj:
        example: "61453926000127"
        type: string
      codigo_municipio:
        example: "3509502"
        type: string
      codigo_pais:
        example: "1058"
        type: string
      codigo_uf:
        example: "35"
        type: string
      complemento:
        example: BLOCO 24 APT 04 COND RES OURO VERDE
        type: string
      cpf:
        example: "12345678901"
        type: string
      cpf_responsavel:
        type: string
      discrimina_impostos:
        description: Flags comuns
        example: true
        type: boolean
      email:
        example: andre.vi.riibeiro@gmail.com
        type: string
      enviar_email_destinatario:
        example: true
        type: boolean
      enviar_email_homologacao:
        example: false
        type: boolean
      habilita_csrt_nfe:
        example: true
        type: boolean
      habilita_cte:
        example: false
        type: boolean
      habilita_manifestacao:
        example: false
        type: boolean
      habilita_mdfe:
        example: false
        type: boolean
      habilita_nfce:
        example: false
        type: boolean
      habilita_nfe:
        example: false
        type: boolean
      habilita_nfse:
        example: false
        type: boolean
      id:
        description: Campos principais + campos retornados pela Focus (exemplo real).
        example: 170571
        type: integer
      inscricao_estadual:
        type: string
      inscricao_municipal:
        example: "10721193"
        type: string
      logradouro:
        example: COACIARA
        type: string
      municipio:
        example: CAMPINAS
        type: string
      nfe_sincrono:
        example: false
        type: boolean
      nfe_sincrono_homologacao:
        example: false
        type: boolean
      nome:
        example: INFINITY CODE SOLUTIONS LTDA
        type: string
      nome_fantasia:
        example: INFINITY CODE
        type: string
      nome_responsavel:
        description: Outros
        type: string
      numero:
        example: "1101"
        type: string
      pais:
        example: Brasil
        type: string
      regime_tributario:
        example: "1"
        type: string
      telefone:
        example: "1993675739"
        type: string
      token_homologacao:
        example: tmyEw3AL8QIEqjObIuqnbGcP7wMW961F
        type: string
      token_producao:
        description: Tokens
        example: mQadVh1LFN7KQNESwDFLsDBq039z273s
        type: string
      uf:
        example: SP
        type: string
    type: object
  model.FocusEmpresaUpdateRequest:
    properties:
      arquivo_certificado_base64:
        example: MIIj4gIBAzCCI54GCSqGSIb3DQEHAaCC...ASD==
        type: string
      bairro:
        example: Vila Isabel
        type: string
      cep:
        example: 80210000
        type: integer
      cnpj:
        example: "10964044000164"
        type: string
      complemento:
        example: Loja 1
        type: string
      cpf_responsavel:
        example: "12345678901"
        type: string
      email:
        example: test@example.com
        type: string
      habilita_cte:
        example: true
        type: boolean
      habilita_mdfe:
        example: true
        type: boolean
      habilita_nfce:
        example: true
        type: boolean
      habilita_nfe:
        example: true
        type: boolean
      habilita_nfse:
        example: true
        type: boolean
      habilita_nfsen_producao:
        example: true
        type: boolean
      inscricao_municipal:
        description: Must be string to preserve leading zeros
        example: "0046532"
        type: string
      login_responsavel:
        example: usuario@example.com
        type: string
      logradouro:
        example: Rua João da Silva
        type: string
      municipio:
        example: Curitiba
        type: string
      nome:
        example: Nome da empresa Ltda
        type: string
      nome_fantasia:
        example: Nome Fantasia
        type: string
      nome_responsavel:
        example: Fulano de Tal
        type: string
      numero:
        example: 153
        type: integer
      proximo_numero_cte_producao:
        example: 1
        type: integer
      proximo_numero_mdfe_producao:
        example: 1
        type: integer
      proximo_numero_nfce_producao:
        example: 1
        type: integer
      proximo_numero_nfe_producao:
        example: 1
        type: integer
      proximo_numero_nfse_producao:
        example: 1
        type: integer
      proximo_numero_nfsen_producao:
        example: 1
        type: integer
      regime_tributario:
        example: 1
        type: integer
      senha_certificado:
        example: "123456"
        type: string
      senha_responsavel:
        example: senha123
        type: string
      senha_responsavel_preenchida:
        example: false
        type: boolean
      telefone:
        example: "4130333333"
        type: string
      uf:
        example: PR
        type: string
    type: object
  model.FocusMunicipioResponse:
    properties:
      codigo_cnae_obrigatorio_nfse:
        type: boolean
      codigo_municipio:
        type: string
      codigo_tributario_municipio_obrigatorio_nfse:
        type: boolean
      cpf_cnpj_obrigatorio_nfse:
        type: boolean
      data_previsao_reimplementacao_nfse:
        type: string
      endereco_obrigatorio_nfse:
        type: boolean
      item_lista_servico_obrigatorio_nfse:
        type: boolean
      nfse_habilitada:
        type: boolean
      nome_municipio:
        type: string
      nome_uf:
        type: string
      possui_ambiente_homologacao_nfse:
        type: boolean
      possui_cancelamento_nfse:
        type: boolean
      provedor_nfse:
        type: string
      requer_certificado_nfse:
        type: boolean
      sigla_uf:
        type: string
      status_nfse:
        type: string
      ultima_emissao_nfse:
        type: string
    type: object
host: localhost:8082
info:
  contact: {}
  description: Microservice para integração de cadastro/consulta/edição/remoção de
    empresas na Focus NFe (v2).
  title: Focus Integration Service
  version: 0.1.0
paths:
  /health:
    get:
      description: Check the health of the service
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.HealthResponse'
      summary: Health check
      tags:
      - status
  /v2/cnpjs/{cnpj}:
    get:
      description: 'Proxy para Focus: GET /v2/cnpjs/{cnpj}. Informe 14 dígitos (somente
        números).'
      parameters:
      - description: CNPJ (14 dígitos, somente números)
        in: path
        name: cnpj
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.FocusCnpjResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.RawPayload'
      summary: Consulta cadastro de CNPJ
      tags:
      - CNPJs
  /v2/empresas:
    get:
      description: 'Proxy para Focus: GET /v2/empresas (suporta cnpj, cpf, offset)'
      parameters:
      - description: CNPJ (somente números)
        in: query
        name: cnpj
        type: string
      - description: CPF (somente números)
        in: query
        name: cpf
        type: string
      - description: Paginação (offset)
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/model.FocusEmpresaResponse'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.RawPayload'
      summary: Lista empresas na Focus
      tags:
      - Empresas
    post:
      consumes:
      - application/json
      description: 'Proxy para Focus: POST /v2/empresas'
      parameters:
      - description: ID da empresa (companies.id)
        in: query
        name: company_id
        required: true
        type: string
      - description: Dados da empresa
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/model.FocusEmpresaCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/model.FocusEmpresaResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.RawPayload'
      summary: Cria uma nova empresa na Focus
      tags:
      - Empresas
  /v2/empresas/{id}:
    delete:
      description: 'Proxy para Focus: DELETE /v2/empresas/{id}'
      parameters:
      - description: ID da empresa na Focus
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.FocusEmpresaResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.RawPayload'
      summary: Exclui uma empresa na Focus
      tags:
      - Empresas
    get:
      description: 'Proxy para Focus: GET /v2/empresas/{id}'
      parameters:
      - description: ID da empresa na Focus
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.FocusEmpresaResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.RawPayload'
      summary: Consulta uma empresa por ID na Focus
      tags:
      - Empresas
    put:
      consumes:
      - application/json
      description: 'Proxy para Focus: PUT /v2/empresas/{id}. Apenas os campos enviados
        serão atualizados. Se atualizar certificado com sucesso, erros antigos serão
        removidos.'
      parameters:
      - description: ID da empresa na Focus
        in: path
        name: id
        required: true
        type: string
      - description: ID da empresa no Supabase (para limpeza de erros)
        in: query
        name: company_id
        type: string
      - description: ID do certificado no Supabase (para limpeza de erros)
        in: query
        name: certificate_id
        type: string
      - description: Dados para atualização (campos opcionais)
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/model.FocusEmpresaUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.FocusEmpresaResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.RawPayload'
      summary: Altera uma empresa específica na Focus
      tags:
      - Empresas
  /v2/municipios:
    get:
      description: 'Proxy para Focus: GET /v2/municipios. Suporta filtros via querystring
        (sigla_uf, nome_municipio, nome, status_nfse, offset).'
      parameters:
      - description: 'Sigla UF (ex: PR)'
        in: query
        name: sigla_uf
        type: string
      - description: 'Nome exato do município (ex: Curitiba)'
        in: query
        name: nome_municipio
        type: string
      - description: Trecho do nome do município
        in: query
        name: nome
        type: string
      - description: Status NFSe (ativo, fora_do_ar, pausado, em_implementacao, em_reimplementacao,
          inativo, nao_implementado)
        in: query
        name: status_nfse
        type: string
      - description: Paginação (offset)
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/model.FocusMunicipioResponse'
            type: array
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.RawPayload'
      summary: Lista municípios (IBGE)
      tags:
      - Municípios
  /v2/municipios/{codigo_municipio}:
    get:
      description: 'Proxy para Focus: GET /v2/municipios/{codigo_municipio}.'
      parameters:
      - description: Código do município (IBGE)
        in: path
        name: codigo_municipio
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/model.FocusMunicipioResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.RawPayload'
      summary: Busca município por código IBGE
      tags:
      - Municípios
  /v2/municipios/{codigo_municipio}/codigos_tributarios_municipio:
    get:
      description: 'Proxy para Focus: GET /v2/municipios/{codigo_municipio}/codigos_tributarios_municipio.
        Suporta filtros via querystring (codigo, descricao, offset).'
      parameters:
      - description: Código do município (IBGE)
        in: path
        name: codigo_municipio
        required: true
        type: string
      - description: 'Trecho do código (ex: 14.)'
        in: query
        name: codigo
        type: string
      - description: Trecho da descrição
        in: query
        name: descricao
        type: string
      - description: Paginação (offset)
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/handler.RawPayload'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.RawPayload'
      summary: Lista códigos tributários municipais por município
      tags:
      - Municípios - Códigos Tributários
  /v2/municipios/{codigo_municipio}/codigos_tributarios_municipio/{codigo}:
    get:
      description: 'Proxy para Focus: GET /v2/municipios/{codigo_municipio}/codigos_tributarios_municipio/{codigo}.'
      parameters:
      - description: Código do município (IBGE)
        in: path
        name: codigo_municipio
        required: true
        type: string
      - description: Código tributário municipal
        in: path
        name: codigo
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.RawPayload'
      summary: Busca código tributário municipal por código (município)
      tags:
      - Municípios - Códigos Tributários
  /v2/municipios/{codigo_municipio}/itens_lista_servico:
    get:
      description: 'Proxy para Focus: GET /v2/municipios/{codigo_municipio}/itens_lista_servico.
        Suporta filtros via querystring (codigo, descricao, offset).'
      parameters:
      - description: Código do município (IBGE)
        in: path
        name: codigo_municipio
        required: true
        type: string
      - description: 'Trecho do código (ex: 14.)'
        in: query
        name: codigo
        type: string
      - description: Trecho da descrição
        in: query
        name: descricao
        type: string
      - description: Paginação (offset)
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/handler.RawPayload'
            type: array
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.RawPayload'
      summary: Lista itens da lista de serviço por município
      tags:
      - Municípios - Itens Lista de Serviço
  /v2/municipios/{codigo_municipio}/itens_lista_servico/{codigo}:
    get:
      description: 'Proxy para Focus: GET /v2/municipios/{codigo_municipio}/itens_lista_servico/{codigo}.'
      parameters:
      - description: Código do município (IBGE)
        in: path
        name: codigo_municipio
        required: true
        type: string
      - description: 'Código do item (ex: 14.01)'
        in: path
        name: codigo
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/handler.RawPayload'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.RawPayload'
      summary: Busca item da lista de serviço por código (município)
      tags:
      - Municípios - Itens Lista de Serviço
swagger: "2.0"
